<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/Project/mall-platform-qysc/frontend/restapi/src/main/java/com/xquark/config/WebMvcConfig.java" timestamp="1555405334285">
        <mark key="[" line="127" column="3" />
      </file>
      <file name="$USER_HOME$/Project/serviceAccount-scrmapp-pc/scrmapppc-service/src/main/java/com/ziwow/scrmapppc/schedule/GeneratorCsvScheduledTask.java" timestamp="1555575119052" />
      <file name="$USER_HOME$/Project/scrmapp/scrmapp-webapp/src/main/resources/development/application.properties" timestamp="1555591861970">
        <mark key="[" line="116" column="0" />
        <mark key="]" line="116" column="24" />
        <mark key="^" line="116" column="35" />
        <mark key="." line="116" column="35" />
      </file>
      <file name="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/service/WechatTemplateService.java" timestamp="1555592176538">
        <mark key="[" line="246" column="0" />
        <mark key="]" line="260" column="4" />
        <mark key="^" line="260" column="4" />
        <mark key="." line="260" column="4" />
      </file>
      <file name="$USER_HOME$/Project/serviceAccount-scrmapp-pc/scrmapppc-service/src/main/java/com/ziwow/scrmapppc/service/impl/WechatOrdersServiceImpl.java" timestamp="1555574929547" />
      <file name="/application.properties" timestamp="1555579762274" />
      <file name="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/java/com/xquark/dal/model/Product.java" timestamp="1555593416190" />
      <file name="/Dummy.txt" timestamp="1555573594474">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/controller/WechatTemplateController.java" timestamp="1555593360495">
        <mark key="[" line="65" column="26" />
        <mark key="]" line="65" column="33" />
        <mark key="." line="65" column="33" />
        <mark key="^" line="65" column="33" />
      </file>
      <file name="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/vo/callCenter/CallCenterMessage.java" timestamp="1555572804009" />
      <file name="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/service/WeChatMessageProcessingHandler.java" timestamp="1555573584924">
        <mark key="[" line="351" column="21" />
        <mark key="]" line="351" column="21" />
        <mark key="." line="351" column="21" />
      </file>
      <file name="$USER_HOME$/Project/serviceAccount-scrmapp-pc/scrmapppc-service/src/main/java/com/ziwow/scrmapppc/persistence/mapper/WechatOrdersMapper.xml" timestamp="1555575153225" />
      <file name="$USER_HOME$/Project/serviceAccount-scrmapp-pc/scrmapppc-service/src/main/java/com/ziwow/scrmapppc/controller/custmanage/customerservice/CustomerServiceController.java" timestamp="1555574844213" />
      <file name="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/restapi/src/main/java/com/xquark/restapi/logisticsPlatform/LogisticsPlatformController.java" timestamp="1555572406980" />
      <file name="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/weixin/TemplateSetting.java" timestamp="1555592681866">
        <mark key="[" line="362" column="0" />
        <mark key="]" line="362" column="0" />
        <mark key="." line="362" column="0" />
        <mark key="^" line="355" column="72" />
      </file>
      <file name="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/service/impl/WechatTemplateServiceImpl.java" timestamp="1555592895830">
        <mark key="[" line="248" column="65" />
        <mark key="]" line="248" column="70" />
        <mark key="^" line="248" column="70" />
        <mark key="." line="248" column="70" />
      </file>
      <file name="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/controller/WechatUserAddressController.java" timestamp="1555593412210" />
      <file name="/fragment.java" timestamp="1555593311684">
        <mark key="[" line="0" column="0" />
      </file>
    </filemarks>
    <jumps>
      <jump line="31" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/impl/pricing/impl/PromotionDiscountPricingChain.java" />
      <jump line="36" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/impl/pricing/impl/CouponDiscountPricingChain.java" />
      <jump line="49" column="34" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/impl/pricing/DiscountPricingChain.java" />
      <jump line="290" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/impl/pricing/impl/CouponDiscountPricingChain.java" />
      <jump line="101" column="4" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/impl/pricing/DiscountPricingChain.java" />
      <jump line="123" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/impl/pricing/impl/FirstFilterDiscountPricingChain.java" />
      <jump line="33" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/impl/pricing/impl/FirstFilterDiscountPricingChain.java" />
      <jump line="13" column="24" filename="$USER_HOME$/Project/mall-platform-qysc/dal/src/main/java/com/xquark/dal/vo/CouponView.java" />
      <jump line="16" column="34" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/impl/pricing/DiscountPricingChain.java" />
      <jump line="482" column="61" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/fullReduce/fullCut/impl/PromotionFullCutServiceImpl.java" />
      <jump line="465" column="38" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/product/vo/ProductVO.java" />
      <jump line="47" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/product/vo/ProductVO.java" />
      <jump line="483" column="2" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/product/vo/ProductVO.java" />
      <jump line="30" column="38" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/pricing/vo/CartPromotionResultVO.java" />
      <jump line="88" column="13" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/order/impl/MainOrderServiceImpl.java" />
      <jump line="423" column="72" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/resources/config/MapperConfig.xml" />
      <jump line="101" column="19" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/java/com/xquark/dal/mybatis/IdTypeHandler.java" />
      <jump line="12" column="31" filename="$USER_HOME$/Project/qinyuan-point-core/src/main/java/com/point/xquark/dal/model/PointTotalOperation.java" />
      <jump line="124" column="39" filename="$USER_HOME$/Project/qinyuan-point-core/src/main/java/com/point/xquark/dal/model/PointTotalOperation.java" />
      <jump line="70" column="11" filename="$USER_HOME$/Project/qinyuan-point-core/src/main/java/com/point/xquark/service/point/impl/PointCommServiceImpl.java" />
      <jump line="40" column="6" filename="$USER_HOME$/Project/serviceAccount-scrmapp-pc/scrmapppc-web/src/main/resources/development/application.properties" />
      <jump line="40" column="6" filename="$USER_HOME$/Project/serviceAccount-scrmapp-pc/scrmapppc-web/src/main/resources/preOnline/application.properties" />
      <jump line="568" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/wechat/impl/WechatServiceImpl.java" />
      <jump line="20" column="11" filename="$USER_HOME$/Project/qinyuan-point-core/src/main/java/com/point/xquark/service/point/PointCommOperationResult.java" />
      <jump line="25" column="6" filename="$USER_HOME$/Project/qinyuan-point-core/src/test/java/com/hds/xquark/service/point/impl/CommissionOperationTest.java" />
      <jump line="32" column="6" filename="$USER_HOME$/Project/qinyuan-point-core/src/test/java/com/hds/xquark/service/point/impl/PointOperationTest.java" />
      <jump line="1" column="0" filename="$USER_HOME$/Project/scrmapp/scrmapp-webapp/src/main/resources/production/application.properties" />
      <jump line="178" column="0" filename="$USER_HOME$/Project/scrmapp/scrmapp-webapp/src/main/resources/production/application.properties" />
      <jump line="0" column="0" filename="$USER_HOME$/Project/scrmapp/scrmapp-webapp/src/main/resources/development/log4j.properties" />
      <jump line="528" column="49" filename="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/service/WeChatMessageProcessingHandler.java" />
      <jump line="18" column="0" filename="$USER_HOME$/Project/scrmapp/scrmapp-webapp/src/main/resources/production/application.properties" />
      <jump line="52" column="13" filename="$USER_HOME$/Project/mall-platform4sale/frontend/restapi/src/main/java/com/xquark/restapi/crm/CrmCourseController.java" />
      <jump line="519" column="8" filename="$USER_HOME$/Project/tomcat-redis-session-manager-1.2-tomcat-7/src/main/java/com/radiadesign/catalina/session/RedisSessionManager.java" />
      <jump line="513" column="0" filename="$USER_HOME$/Project/tomcat-redis-session-manager-1.2-tomcat-7/src/main/java/com/radiadesign/catalina/session/RedisSessionManager.java" />
      <jump line="547" column="0" filename="$USER_HOME$/Project/tomcat-redis-session-manager-1.2-tomcat-7/src/main/java/com/radiadesign/catalina/session/RedisSessionManager.java" />
      <jump line="46" column="15" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="80" column="46" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="215" column="45" filename="$USER_HOME$/Project/serviceAccount-scrmapp-pc/scrmapppc-service/src/main/java/com/ziwow/scrmapppc/service/impl/WechatServiceImpl.java" />
      <jump line="270" column="61" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/restapi/src/main/java/com/xquark/restapi/product/ProductController.java" />
      <jump line="297" column="16" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/restapi/src/main/java/com/xquark/restapi/product/ProductController.java" />
      <jump line="21" column="26" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/resources/env/config-innertest-hds.properties" />
      <jump line="94" column="15" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/resources/env/config-innertest-hds.properties" />
      <jump line="95" column="28" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/resources/env/config-innertest-hds.properties" />
      <jump line="139" column="14" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/resources/env/config-innertest-hds.properties" />
      <jump line="221" column="16" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/resources/env/config-innertest-hds.properties" />
      <jump line="226" column="26" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/resources/env/config-innertest-hds.properties" />
      <jump line="253" column="28" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/dal/src/main/resources/env/config-innertest-hds.properties" />
      <jump line="441" column="53" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/form.js" />
      <jump line="6312" column="59" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="82" column="15" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/WEB-INF/views/mall/packageRainConfig.html" />
      <jump line="8" column="36" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/supplier/add.js" />
      <jump line="581" column="26" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/packageRainConfig/config.js" />
      <jump line="16" column="23" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/packageRainConfig/config.js" />
      <jump line="0" column="0" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/packageRainConfig/config.js" />
      <jump line="283" column="56" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/bargain/list.js" />
      <jump line="51" column="12" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/packageRainConfig/config.js" />
      <jump line="289" column="30" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/bargain/list.js" />
      <jump line="278" column="46" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/bargain/list.js" />
      <jump line="78" column="50" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/packageRainConfig/config.js" />
      <jump line="67" column="45" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/packageRainConfig/config.js" />
      <jump line="423" column="0" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/form.js" />
      <jump line="653" column="14" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="1215" column="58" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="1325" column="34" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="89" column="20" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/xlsxUpload.js" />
      <jump line="40" column="7" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/xlsxUpload.js" />
      <jump line="1397" column="0" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="1041" column="22" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="96" column="26" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/xlsxUpload.js" />
      <jump line="232" column="4" filename="$USER_HOME$/Project/mall-platform-qysc/dal/src/main/java/com/xquark/dal/vo/ProductBasicVO.java" />
      <jump line="44" column="0" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="1351" column="4" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/edit.js" />
      <jump line="1691" column="57" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/order/impl/OrderServiceImpl.java" />
      <jump line="1619" column="66" filename="$USER_HOME$/Project/mall-platform-qysc/frontend/restapi/src/main/java/com/xquark/restapi/order/OrderController.java" />
      <jump line="111" column="54" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/webapp/_resources/js/page/product/form.js" />
      <jump line="30" column="0" filename="$USER_HOME$/Project/gitlib/mall-platform-hds/frontend/pc/src/main/java/com/xquark/web/shop/ThirdPartySupplierOrderExportVO.java" />
      <jump line="3796" column="71" filename="$USER_HOME$/Project/mall-platform-qysc/package.txt" />
      <jump line="18" column="17" filename="$USER_HOME$/Project/mall-platform-qysc/dal/src/main/java/com/xquark/dal/model/MiniProgramAccessLog.java" />
      <jump line="34" column="15" filename="$USER_HOME$/Project/mall-platform-qysc/dal/src/main/java/com/xquark/dal/model/MiniProgramAccessLog.java" />
      <jump line="1084" column="68" filename="$USER_HOME$/Project/mall-platform-qysc/dal/src/main/resources/com/xquark/dal/mapper/ProductMapper.xml" />
      <jump line="0" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/dal/src/main/resources/config/MapperConfig.xml" />
      <jump line="42" column="3" filename="$USER_HOME$/Project/mall-platform-qysc/frontend/restapi/src/main/java/com/xquark/restapi/log/MiniProgramLogController.java" />
      <jump line="21" column="13" filename="$USER_HOME$/Project/mall-platform-qysc/dal/src/main/java/com/xquark/config/DalConfig.java" />
      <jump line="55" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/dal/docs/update_181227.sql" />
      <jump line="11" column="16" filename="$USER_HOME$/Project/mall-platform-qysc/dal/docs/update_190307.sql" />
      <jump line="0" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/dal/docs/update_190307.sql" />
      <jump line="12" column="0" filename="$USER_HOME$/Project/mall-platform-qysc/dal/docs/update_190307.sql" />
      <jump line="26" column="39" filename="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/persistence/mapper/WechatMessageLogMapper.xml" />
      <jump line="10" column="16" filename="$USER_HOME$/Project/mall-platform-qysc/dal/docs/update_190319.sql" />
      <jump line="827" column="17" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/user/impl/UserServiceImpl.java" />
      <jump line="15" column="46" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/wechat/constants/WechatUrlPath.java" />
      <jump line="17" column="44" filename="$USER_HOME$/Project/mall-platform-qysc/service/src/main/java/com/xquark/service/wechat/constants/WechatUrlPath.java" />
      <jump line="27" column="11" filename="$USER_HOME$/Project/mall-platform-qysc/frontend/pc/src/main/webapp/WEB-INF/web.xml" />
      <jump line="22" column="9" filename="$USER_HOME$/Project/mall-platform-qysc/frontend/bos/src/main/webapp/WEB-INF/web.xml" />
      <jump line="134" column="0" filename="$USER_HOME$/Project/mall-platform4sale/frontend/web/src/main/webapp/_resources/css/productlist.css" />
      <jump line="46" column="2" filename="$USER_HOME$/Project/mall-platform4sale/frontend/web/src/main/webapp/_resources/js/src/product/category.js" />
      <jump line="15" column="26" filename="$USER_HOME$/Project/mall-platform4sale/frontend/web/src/main/webapp/WEB-INF/views/crm/product/productDetail.html" />
      <jump line="29" column="31" filename="$USER_HOME$/Project/mall-platform4sale/dal/src/main/java/com/xquark/dal/vo/CrmProductVO.java" />
      <jump line="727" column="61" filename="$USER_HOME$/.gradle/caches/modules-2/files-2.1/org.apache.tomcat/tomcat-catalina/7.0.27/3b4b9e5e9ebc105a358f55765f5a2083974fb5dc/tomcat-catalina-7.0.27-sources.jar!/org/apache/catalina/session/StandardSession.java" />
      <jump line="91" column="6" filename="$USER_HOME$/Project/scrmapp/scrmapp-wechat/src/main/java/com/ziwow/scrmapp/wechat/controller/WechatTemplateController.java" />
    </jumps>
    <registers>
      <register name="a" type="4">
        <text>deleteByExecuteId</text>
      </register>
      <register name="&quot;" type="4">
        <text>consumer/user</text>
      </register>
      <register name="b" type="4">
        <text>end_time</text>
      </register>
      <register name="c" type="4">
        <text>notify_time</text>
      </register>
      <register name="d" type="4">
        <text>finish_count</text>
      </register>
      <register name="-" type="4">
        <text>consumer/user</text>
      </register>
      <register name="/" type="4">
        <text encoding="base64">XDxjb252ZXJzaW9uUHJpY2VcPg==</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">CQlUZW1wbGF0ZURhdGEgdGVtcGxhdGVEYXRhID0gVGVtcGxhdGVTZXR0aW5nLmNoYW5nZUFwcG9pbnRtZW50VGVtcGxhdGVTZXR0aW5nKG9wZW5JZCwKCQkJCXRoaXMuZ2V0VGVtcGxhdGVJRChjaGFuZ2VBcHBvaW50bWVudFRlbXBsYXRlSWQpLCB1cmwsIHRpdGxlLCBvcmRlclR5cGUsIG9yZGVyc0NvZGUsIG9yZGVyVGltZSwgcXloVXNlck5hbWUsCgkJCQlxeWhVc2VyUGhvbmUsIHJlbWFyayk7CgkJdGhpcy5zZW5kVGVtcGxhdGVNc2dCeVRva2VuKHdlaVhpblNlcnZpY2UuZ2V0QWNjZXNzVG9rZW4oYXBwaWQsIHNlY3JldCksIHRlbXBsYXRlRGF0YSk7Cg==</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">ICAgIEBBdXRvd2lyZWQKICAgIFdlY2hhdFVzZXJTZXJ2aWNlIHdlY2hhdFVzZXJTZXJ2aWNlOwogICAgQEF1dG93aXJlZAogICAgV2VjaGF0RmFuc1NlcnZpY2Ugd2VjaGF0RmFuc1NlcnZpY2U7CiAgICBAQXV0b3dpcmVkCiAgICBXZWNoYXRBRVNTZXJ2aWNlIHdlY2hhdEFFU1NlcnZpY2U7CiAgICBAQXV0b3dpcmVkCiAgICBXZWNoYXRDaXR5U2VydmljZSB3ZWNoYXRDaXR5U2VydmljZTsKICAgIEBBdXRvd2lyZWQKICAgIE1vYmlsZVNlcnZpY2UgbW9iaWxlU2VydmljZTsKICAgIEBBdXRvd2lyZWQKICAgIFJlZGlzU2VydmljZSByZWRpc1NlcnZpY2U7CiAgICBAQXV0b3dpcmVkCiAgICBQcm9kdWN0U2VydmljZSBwcm9kdWN0U2VydmljZTsKICAgIEBBdXRvd2lyZWQKICAgIFdlY2hhdE9yZGVyc1NlcnZpY2Ugd2VjaGF0T3JkZXJzU2VydmljZTsKICAgIEBBdXRvd2lyZWQKICAgIFRoaXJkUGFydHlTZXJ2aWNlIHRoaXJkUGFydHlTZXJ2aWNlOwogICAgQEF1dG93aXJlZAogICAgU21zU2VuZFJlY29yZFNlcnZpY2Ugc21zU2VuZFJlY29yZFNlcnZpY2U7CiAgICBAUmVzb3VyY2UKICAgIEh0dHBTZXNzaW9uIHNlc3Npb247Cg==</text>
      </register>
      <register name="q" type="4">
        <text />
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgIC8qKgogICAgICog5Y+R6YCB6aqM6K+B56CBCiAgICAgKgogICAgICogQHBhcmFtIG1vYmlsZQogICAgICogQHBhcmFtIG9wZW5JZAogICAgICogQHJldHVybgogICAgICovCiAgICBAUmVzcG9uc2VCb2R5CiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSAiL3ZlcmlmeWNvZGUvc2VuZCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVCwgcHJvZHVjZXMgPSB7ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCJ9KQogICAgcHVibGljIFJlc3VsdCBzZW5kVmVyaWZ5Y29kZShAUmVxdWVzdFBhcmFtKCJvcGVuSWQiKSBTdHJpbmcgb3BlbklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJtb2JpbGUiKSBTdHJpbmcgbW9iaWxlKSB7CiAgICAgICAgUmVzdWx0IHJlc3VsdCA9IG5ldyBCYXNlUmVzdWx0KCk7CiAgICAgICAgLy8gb3Blbklk5LiN6IO95Li656m6CiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzRW1wdHkob3BlbklkLnRyaW0oKSkpIHsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIueUqOaIt29wZW5JZOS4ult7fV0iLCBvcGVuSWQpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLnlKjmiLdvcGVuSWTkuI3og73kuLrnqbohIik7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvLyDmiYvmnLrlj7fkuI3og73kuLrnqboKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eShtb2JpbGUudHJpbSgpKSkgewogICAgICAgICAgICBsb2dnZXIuaW5mbygi5rOo5YaM55So5oi3W3t9XeaJi+acuuWPt+S4jeiDveS4uuepuiIsIG1vYmlsZSk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuaJi+acuuWPt+S4jeiDveS4uuepuiEiKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIGlmICghTW9iaWxlU3RhY2sucmVwZWF0UmVxdWVzdChtb2JpbGUpKSB7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLnlKjmiLdbe31d5Y+R6YCB6aqM6K+B56CB5pe26aqM6K+Bb3BlbmlkW3t9XeaXtumUmeivryzljp/lm6DmmK/popHnuYHojrflj5bpqozor4HnoIEiLCBtb2JpbGUsIG9wZW5JZCk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuivt+S4jeimgemikee5geiOt+WPlumqjOivgeeggSEiKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8vIOmYsuatoumHjeWkjeivt+axggogICAgICAgIE1vYmlsZVN0YWNrLmNoZWNrTW9iaWxlKG1vYmlsZSk7CiAgICAgICAgTW9iaWxlU3RhY2suYWRkTW9iaWxlKG1vYmlsZSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8g6Kej5a+Gb3Blbklk5a2X56ym5LiyCiAgICAgICAgICAgIFN0cmluZyBvcGVuSWREZXMgPSB3ZWNoYXRBRVNTZXJ2aWNlLkRlY3J5cHQob3BlbklkKTsKICAgICAgICAgICAgLy8g5rOo5YaM5YmN6K+35YWI5YWz5rOo5b2T5YmN5pyN5Yqh5Y+3CiAgICAgICAgICAgIFdlY2hhdEZhbnMgd2VjaGF0RmFucyA9IHdlY2hhdEZhbnNTZXJ2aWNlLmdldFdlY2hhdEZhbnMob3BlbklkRGVzKTsKICAgICAgICAgICAgaWYgKHdlY2hhdEZhbnMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIueUqOaIt1t7fV3lj5HpgIHpqozor4HnoIEs6aqM6K+Bb3BlbmlkW3t9XeaXtumUmeivryzljp/lm6DmmK/msqHmnInlhbPms6jlvZPliY3llYblj7ciLCBtb2JpbGUsIG9wZW5JZERlcyk7CiAgICAgICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLms6jlhozliY3or7flhYjlhbPms6jlvZPliY3mnI3liqHlj7chIik7CiAgICAgICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5GQUlMKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g5Yik5pat55So5oi35piv5ZCm5rOo5YaM6L+H5LqGCiAgICAgICAgICAgIFdlY2hhdFVzZXIgd2VjaGF0VXNlciA9IHdlY2hhdFVzZXJTZXJ2aWNlLmdldFVzZXJCeU1vYmlsZVBob25lKG1vYmlsZSk7CiAgICAgICAgICAgIGlmICh3ZWNoYXRVc2VyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLnlKjmiLdbe31d5Y+R6YCB6aqM6K+B56CB5pe26aqM6K+Bb3BlbmlkW3t9XeW3suiiq+azqOWGjCEiLCBtb2JpbGUsIG9wZW5JZERlcyk7CiAgICAgICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLor6XnlKjmiLflt7Lnu4/ms6jlhozkuobor6XmnI3liqHlj7chIik7CiAgICAgICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5GQUlMKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gY2FjaGUga2V5CiAgICAgICAgICAgIFN0cmluZyBLRVkgPSBSZWRpc0tleUNvbnN0YW50cy5nZXRVc2VyUmVnaXNndGVyS2V5KCkgKyBtb2JpbGU7CiAgICAgICAgICAgIFN0cmluZyBzZW5kQ291bnRLZXkgPSBSZWRpc0tleUNvbnN0YW50cy5nZXRVc2VyUmVnaXNndGVyS2V5KCkgKyAiY291bnQiICsgIjoiICsgbW9iaWxlOwoKICAgICAgICAgICAgaW50IHNlbmRDb3VudCA9IDA7CiAgICAgICAgICAgIE9iamVjdCBjb3VudFN0ciA9IHJlZGlzU2VydmljZS5nZXQoc2VuZENvdW50S2V5KTsKICAgICAgICAgICAgaWYgKGNvdW50U3RyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHNlbmRDb3VudCA9IEludGVnZXIucGFyc2VJbnQoY291bnRTdHIudG9TdHJpbmcoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9nZ2VyLmluZm8oIueUqOaIt1t7fV3ojrflj5ZvcGVuaWRbe31d6aqM6K+B56CB5qyh5pWwW3t9XSIsIG1vYmlsZSwgb3BlbklkRGVzLCBzZW5kQ291bnQpOwoKICAgICAgICAgICAgLy8g5Yik5pat5Y+R6YCB6aqM6K+B56CB5LiN6IO96LaF6L+HM+asoemqjOivgQogICAgICAgICAgICBpZiAoc2VuZENvdW50IDwgNCkgewogICAgICAgICAgICAgICAgYm9vbGVhbiBzZW5kUmVzdWx0ID0gbW9iaWxlU2VydmljZS5zZW5kVmVyaWZ5Q29kZUJ5RW1heShLRVksIG1vYmlsZSk7CiAgICAgICAgICAgICAgICBpZiAoc2VuZFJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgIHNlbmRDb3VudCA9IHNlbmRDb3VudCArIDE7CiAgICAgICAgICAgICAgICAgICAgcmVkaXNTZXJ2aWNlLnNldChzZW5kQ291bnRLZXksIHNlbmRDb3VudCwgRGF0ZVV0aWwuZ2V0TmlnaHRTZWNvbmQoKSk7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGNvZGUgPSByZWRpc1NlcnZpY2UuaGFzS2V5KEtFWSkgPyAoU3RyaW5nKSByZWRpc1NlcnZpY2UuZ2V0KEtFWSkgOiBudWxsOwogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLnlKjmiLdbe31d6I635Y+W6aqM6K+B56CBW3t9XeaIkOWKnyIsIG1vYmlsZSwgY29kZSk7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZyhDb25zdGFudC5PSyk7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuU1VDQ0VTUyk7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldERhdGEoY29kZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuWPkemAgemqjOivgeeggeWksei0pSEiKTsKICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5GQUlMKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLnlKjmiLdbe31d6I635Y+Wb3BlbklkW3t9XemqjOivgeeggeasoeaVsFt7fV3otoXov4flvZPlpKnpmZDliLbmrKHmlbAiLCBtb2JpbGUsIG9wZW5JZERlcywgc2VuZENvdW50KTsKICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi6aqM6K+B56CB5LuK5aSp5Y+q6IO96I635Y+WM+asoeWTpiIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigi55So5oi3WyIgKyBtb2JpbGUgKyAiXeiOt+WPlm9wZW5pZFsiICsgb3BlbklkICsgIl3pqozor4HnoIHlpLHotKXvvIzljp/lm6DvvJoiLCBlKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuiOt+WPlumqjOivgeeggeWksei0pSIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlmIChtb2JpbGUgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgTW9iaWxlU3RhY2sucmVtb3ZlTW9iaWxlKG1vYmlsZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIOeCueWHu+S4i+S4gOatpeagoemqjOmqjOivgeeggeaYr+WQpuato+ehrgogICAgICoKICAgICAqIEBwYXJhbSBtb2JpbGUKICAgICAqIEBwYXJhbSB2ZXJpZnlDb2RlCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIEBSZXNwb25zZUJvZHkKICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9ICIvdmVyaWZ5Y29kZS9jb25maXJtIiwgbWV0aG9kID0gUmVxdWVzdE1ldGhvZC5QT1NULCBwcm9kdWNlcyA9IHsiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04In0pCiAgICBwdWJsaWMgUmVzdWx0IHZlcmlmeWNvZGVDb25maXJtKEBSZXF1ZXN0UGFyYW0oIm1vYmlsZSIpIFN0cmluZyBtb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oInZlcmlmeWNvZGUiKSBTdHJpbmcgdmVyaWZ5Q29kZSkgewogICAgICAgIFJlc3VsdCByZXN1bHQgPSBuZXcgQmFzZVJlc3VsdCgpOwogICAgICAgIC8vIGNhY2hlIGtleQogICAgICAgIFN0cmluZyBLRVkgPSBSZWRpc0tleUNvbnN0YW50cy5nZXRVc2VyUmVnaXNndGVyS2V5KCkgKyBtb2JpbGU7CiAgICAgICAgTG9uZyBleHBpcmVUaW1lID0gcmVkaXNTZXJ2aWNlLmdldEV4cGlyZShLRVksIFRpbWVVbml0LlNFQ09ORFMpOwogICAgICAgIFN0cmluZyBjb2RlID0gIiI7CiAgICAgICAgaWYgKGV4cGlyZVRpbWUgPiAyKSB7CiAgICAgICAgICAgIGNvZGUgPSAoU3RyaW5nKSByZWRpc1NlcnZpY2UuZ2V0KEtFWSk7CiAgICAgICAgfQogICAgICAgIC8vIOWIpOaWremqjOivgeeggeaYr+WQpuato+ehrgogICAgICAgIGlmICghdmVyaWZ5Q29kZS5lcXVhbHMoY29kZSkpIHsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIueUqOaIt1t7fV3ovpPlhaXnmoTpqozor4HnoIFbe31d5LiN5q2j56GuIiwgbW9iaWxlLCB2ZXJpZnlDb2RlKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi6aqM6K+B56CB5LiN5q2j56GuIik7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOWIpOaWreivpeeUqOaIt+WcqOWVhuWfjuezu+e7n+aYr+WQpuazqOWGjAogICAgICAgICAgICBNYWxsUGNVc2VyIG1hbGxQY1VzZXIgPSB3ZWNoYXRVc2VyU2VydmljZS5nZXRNYWxsUGNVc2VyQnlNb2JpbGUobW9iaWxlKTsKICAgICAgICAgICAgYm9vbGVhbiBmbGFnID0gKG51bGwgPT0gbWFsbFBjVXNlcikgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIumqjOivgeeggeato+ehriIpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5TVUNDRVNTKTsKICAgICAgICAgICAgcmVzdWx0LnNldERhdGEoZmxhZyk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAgICog55So5oi35rOo5YaM5o6l5Y+jCiAgICAgKgogICAgICogQHBhcmFtIG9wZW5JZAogICAgICogQHBhcmFtIG1vYmlsZQogICAgICogQHBhcmFtIHBhc3N3b3JkCiAgICAgKiBAcGFyYW0gaHR0cFJlcQogICAgICogQHBhcmFtIGh0dHBSZXMKICAgICAqIEByZXR1cm4KICAgICAqLwogICAgQFJlc3BvbnNlQm9keQogICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gIi9yZWdpc3RlciIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVCwgcHJvZHVjZXMgPSB7ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCJ9KQogICAgcHVibGljIFJlc3VsdCByZWdpc3RlcihAUmVxdWVzdFBhcmFtKCJvcGVuSWQiKSBTdHJpbmcgb3BlbklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJtb2JpbGUiKSBTdHJpbmcgbW9iaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJpc01hbGxNZW1iZXIiKSBib29sZWFuIGlzTWFsbE1lbWJlciwKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gInBhc3N3b3JkIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHBhc3N3b3JkLAovLyAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oInByb3ZpbmNlSWQiKSBTdHJpbmcgcHJvdmluY2VJZCwKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJjaXR5SWQiKSBTdHJpbmcgY2l0eUlkLAovLyAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oImFyZWFJZCIpIFN0cmluZyBhcmVhSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCBodHRwUmVxLCBIdHRwU2VydmxldFJlc3BvbnNlIGh0dHBSZXMpIHsKICAgICAgICBSZXN1bHQgcmVzdWx0ID0gbmV3IEJhc2VSZXN1bHQoKTsKICAgICAgICAvLyDpmLLmraLph43lpI3or7fmsYIKICAgICAgICBNb2JpbGVTdGFjay5jaGVja01vYmlsZShtb2JpbGUpOwogICAgICAgIE1vYmlsZVN0YWNrLmFkZE1vYmlsZShtb2JpbGUpOwogICAgICAgIC8vIG9wZW5pZOS4jeiDveS4uuepugogICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0JsYW5rKG9wZW5JZCkpIHsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIueUqOaIt1t7fV1vcGVuSWTkuLrnqboiLCBtb2JpbGUpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLor7flhYjlhbPms6jmjIflrprmnI3liqHlj7ciKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8vIOaJi+acuuWPt+S4jeiDveS4uuepugogICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KG1vYmlsZS50cmltKCkpKSB7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLms6jlhoznlKjmiLdbe31d5omL5py65Y+3W3t9XeS4jeiDveS4uuepuiIsIG9wZW5JZCwgbW9iaWxlKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi5omL5py65Y+35LiN6IO95Li656m6Iik7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvLyDlpoLmnpzkuI3mmK/msoHlm63llYbln47nmoTkvJrlkZjpnIDopoHloavlhpnlr4bnoIEKICAgICAgICBpZiAoIWlzTWFsbE1lbWJlcikgewogICAgICAgICAgICAvLyDlr4bnoIHkuI3og73kuLrnqboKLy8gICAgICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eShwYXNzd29yZCkpIHsKLy8gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIuazqOWGjOeUqOaIt1t7fV0s5omL5py6W3t9XeWvhueggeS4jeiDveS4uuepuiIsIG9wZW5JZCwgbW9iaWxlKTsKLy8gICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi5a+G56CB5LiN6IO95Li656m6Iik7Ci8vICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwovLyAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwovLyAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgV2VjaGF0VXNlciB3ZWNoYXRVc2VyID0gbmV3IFdlY2hhdFVzZXIoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyDop6Plr4ZvcGVuSWTlrZfnrKbkuLIKICAgICAgICAgICAgU3RyaW5nIG9wZW5JZERlcyA9IHdlY2hhdEFFU1NlcnZpY2UuRGVjcnlwdChvcGVuSWQpOwogICAgICAgICAgICAvLyDms6jlhozliY3or7flhYjlhbPms6jlvZPliY3mnI3liqHlj7cKICAgICAgICAgICAgV2VjaGF0RmFucyB3ZWNoYXRGYW5zID0gd2VjaGF0RmFuc1NlcnZpY2UuZ2V0V2VjaGF0RmFucyhvcGVuSWREZXMpOwogICAgICAgICAgICBpZiAod2VjaGF0RmFucyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygi55So5oi3W3t9XeWPkemAgemqjOivgeeggSzpqozor4FvcGVuaWRbe31d5pe26ZSZ6K+vLOWOn+WboOaYr+ayoeacieWFs+azqOW9k+WJjeWVhuWPtyIsIG1vYmlsZSwgb3BlbklkRGVzKTsKICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuazqOWGjOWJjeivt+WFiOWFs+azqOW9k+WJjeacjeWKoeWPtyEiKTsKICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDliKTmlq3nlKjmiLfmmK/lkKbms6jlhozov4fkuoYKICAgICAgICAgICAgV2VjaGF0VXNlciB1c2VyID0gd2VjaGF0VXNlclNlcnZpY2UuZ2V0VXNlckJ5TW9iaWxlUGhvbmUobW9iaWxlKTsKICAgICAgICAgICAgaWYgKHVzZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIueUqOaIt1t7fV1vcGVuSWRbe31d5bey6KKr5rOo5YaMIiwgbW9iaWxlLCBvcGVuSWREZXMpOwogICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi6K+l55So5oi35bey57uP6KKr5rOo5YaMIik7CiAgICAgICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5GQUlMKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g6K6+572u55So5oi35L+h5oGvCiAgICAgICAgICAgIFN0cmluZyB1c2VySWQgPSBVbmlxdWVJREJ1aWxkZXIuZ2V0VW5pcXVlSWRWYWx1ZSgpOwogICAgICAgICAgICB3ZWNoYXRVc2VyLnNldFVzZXJJZCh1c2VySWQpOwogICAgICAgICAgICB3ZWNoYXRVc2VyLnNldE1vYmlsZVBob25lKG1vYmlsZS50cmltKCkpOwovLyAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEVtcHR5KHBhc3N3b3JkKSkgewovLyAgICAgICAgICAgICAgICBTdHJpbmcgc2FsdCA9IFNlZWRVdGlsLm5ld1NlZWQoKTsKLy8gICAgICAgICAgICAgICAgd2VjaGF0VXNlci5zZXRQYXNzd29yZChTZWVkVXRpbC5lbmNyeXB0KHNhbHQsIHBhc3N3b3JkLnRyaW0oKSkpOwovLyAgICAgICAgICAgICAgICB3ZWNoYXRVc2VyLnNldFNlZWQoc2FsdCk7Ci8vICAgICAgICAgICAgfQogICAgICAgICAgICB3ZWNoYXRVc2VyLnNldE5pY2tOYW1lKHdlY2hhdEZhbnMuZ2V0V2ZOaWNrTmFtZSgpKTsKICAgICAgICAgICAgaWYgKHdlY2hhdEZhbnMuZ2V0R2VuZGVyKCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgd2VjaGF0VXNlci5zZXRHZW5kZXIod2VjaGF0RmFucy5nZXRHZW5kZXIoKSk7CiAgICAgICAgICAgIH0KLy8gICAgICAgICAgICB3ZWNoYXRVc2VyLnNldFByb3ZpbmNlSWQocHJvdmluY2VJZCk7Ci8vICAgICAgICAgICAgd2VjaGF0VXNlci5zZXRDaXR5SWQoY2l0eUlkKTsKLy8gICAgICAgICAgICB3ZWNoYXRVc2VyLnNldEFyZWFJZChhcmVhSWQpOwogICAgICAgICAgICB3ZWNoYXRVc2VyLnNldFdmSWQod2VjaGF0RmFucy5nZXRJZCgpKTsKICAgICAgICAgICAgLy8g5rOo5YaM5Li65Lya5ZGY5L+u5pS557KJ5Lid6KGoaXNNZW1iZXLnirbmgIEKICAgICAgICAgICAgV2VjaGF0RmFucyBmYW5zID0gbmV3IFdlY2hhdEZhbnMoKTsKICAgICAgICAgICAgZmFucy5zZXRJc01lbWJlcigyKTsKICAgICAgICAgICAgZmFucy5zZXRPcGVuSWQob3BlbklkRGVzKTsKICAgICAgICAgICAgd2VjaGF0VXNlclNlcnZpY2Uuc2F2ZVVzZXIod2VjaGF0VXNlciwgZmFucyk7CiAgICAgICAgICAgIHNlc3Npb24uc2V0QXR0cmlidXRlKFdlQ2hhdENvbnN0YW50cy5VU0VSLCB3ZWNoYXRVc2VyKTsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIueUqOaIt+e8luWPt1t7fV0s55So5oi35ZCNW3t9XSzmiYvmnLrlj7fkuLpbe31d5rOo5YaM5oiQ5YqfIiwgd2VjaGF0VXNlci5nZXRVc2VySWQoKSwgd2VjaGF0VXNlci5nZXRVc2VyTmFtZSgpLCB3ZWNoYXRVc2VyLmdldE1vYmlsZVBob25lKCkpOwogICAgICAgICAgICAvLyDms6jlhozmiJDlip/lvILmraXlj5HpgIHnn63kv6Hmj5DnpLrlj4rmqKHmnb/mtojmga8KICAgICAgICAgICAgZmluYWwgU3RyaW5nIG5pa2VOYW1lID0gd2VjaGF0RmFucy5nZXRXZk5pY2tOYW1lKCk7CiAgICAgICAgICAgIGZpbmFsIFN0cmluZyBtc2dNb2JpbGUgPSBtb2JpbGU7CiAgICAgICAgICAgIGZpbmFsIFN0cmluZyB0bXBsYXRlT3BlbklkID0gb3BlbklkRGVzOwogICAgICAgICAgICBFeGVjdXRvclNlcnZpY2UgZXhlY3V0b3JTZXJ2aWNlID0gRXhlY3V0b3JzLm5ld1NpbmdsZVRocmVhZEV4ZWN1dG9yKCk7CiAgICAgICAgICAgIGV4ZWN1dG9yU2VydmljZS5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewovLyAgICAgICAgICAgICAgICAgICAgU3RyaW5nIG1zZ0NvbnRlbnQgPSAi5Lqy54ix55qE5rKB5Zut55So5oi377yM5oKo5bey5oiQ5Yqf5rOo5YaM5oiQ5Li65rKB5Zut5Lya5ZGY77yB5pu05aSa6LWE6K6v5ZKM5LyY5oOg77yM6K+35oyB57ut5YWz5rOo4oCc5rKB5Zut4oCd5a6Y5pa5V1jmnI3liqHlj7fjgIIiOwogICAgICAgICAgICAgICAgICAgIHdlY2hhdFVzZXJTZXJ2aWNlLnNlbmRSZWdpc3RlclRlbXBsYXRlTXNnKHRtcGxhdGVPcGVuSWQsIG5pa2VOYW1lKTsKLy8gICAgICAgICAgICAgICAgICAgIG1vYmlsZVNlcnZpY2Uuc2VuZENvbnRlbnRCeUVtYXkobXNnTW9iaWxlLCBtc2dDb250ZW50LCBDb25zdGFudC5DVVNUT01FUik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyDlvILmraXmjqjpgIHnu5nlsI/nqIvluo8KICAgICAgICAgICAgZmluYWwgU3RyaW5nIHVuaW9uSWQgPSB3ZWNoYXRGYW5zLmdldFVuaW9uSWQoKTsKICAgICAgICAgICAgZXhlY3V0b3JTZXJ2aWNlLmV4ZWN1dGUobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgd2VjaGF0VXNlclNlcnZpY2Uuc3luY1VzZXJUb01pbmlBcHAodW5pb25JZCwgbXNnTW9iaWxlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDliLfmlrDnn63kv6HokKXplIDorrDlvZUKICAgICAgICAgICAgc21zU2VuZFJlY29yZFNlcnZpY2UudXBkYXRlU21zUmVjb3JkUmVnVGltZShtb2JpbGUpOwoKICAgICAgICAgICAgLy8g5bCG5rOo5YaM5L+h5oGv5ZCM5q2l57uZ56ys5LiJ5pa55rKB5Zut5ZWG5Z+OCi8vICAgICAgICAgICAgdGhpcmRQYXJ0eVNlcnZpY2UucmVnaXN0ZXJNZW1iZXIobW9iaWxlLCBwYXNzd29yZCwgb3BlbklkRGVzKTsKICAgICAgICAgICAgdGhpcmRQYXJ0eVNlcnZpY2UucmVnaXN0ZXJNZW1iZXIobW9iaWxlLCBudWxsLCBvcGVuSWREZXMpOwogICAgICAgICAgICAvLyDlvILmraXlkIzmraXor6XnlKjmiLfnmoTljoblj7Lkuqflk4Hkv6Hmga8KICAgICAgICAgICAgcHJvZHVjdFNlcnZpY2Uuc3luY0hpc3Ryb3lQcm9kdWN0SXRlbUZyb21DZW1UZW1wKG1vYmlsZSwgdXNlcklkKTsKICAgICAgICAgICAgLy8g5byC5q2l5ZCM5q2l6K+l55So5oi355qE5Y6G5Y+y5Y+X55CG5Y2V5L+h5oGvCiAgICAgICAgICAgIHdlY2hhdE9yZGVyc1NlcnZpY2Uuc3luY0hpc3RvcnlBcHBJbmZvKG1vYmlsZSwgdXNlcklkKTsKCiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coQ29uc3RhbnQuT0spOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5TVUNDRVNTKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIueUqOaIt+e8luWPt1siICsgd2VjaGF0VXNlci5nZXRVc2VySWQoKSArICJdLOaJi+acuuWPt+S4ulsiICsgd2VjaGF0VXNlci5nZXRNb2JpbGVQaG9uZSgpICsgIl3ms6jlhozlpLHotKUs5aSx6LSl5Y6f5ZugOiIsIGUpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLnvZHnu5zlh7rplJnkuoblk6Ys6K+36YeN6K+VIik7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlmIChtb2JpbGUgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgTW9iaWxlU3RhY2sucmVtb3ZlTW9iaWxlKG1vYmlsZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKgogICAgICog6YCa6L+Hb3Blbklk6I635Y+WdW5pb25JZAogICAgICogQHBhcmFtIG9wZW5JZAogICAgICogQHJldHVybgogICAgICovCiAgICBAUmVzcG9uc2VCb2R5CiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSAiL2dldFVuaW9uaWQiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVCwgcHJvZHVjZXMgPSB7ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCJ9KQogICAgcHVibGljIHZvaWQgc3luY1VzZXJGcm9tTWluaUFwcChAUmVxdWVzdFBhcmFtKCJvcGVuSWQiKSBTdHJpbmcgb3BlbklkKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgVXNlckluZm8gdXNlckluZm8gPSB3ZWNoYXRGYW5zU2VydmljZS5nZXRVc2VySW5mb0J5T3BlbklkKG9wZW5JZCk7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLpgJrov4dvcGVuSWQ6e33ojrflj5bnmoTnlKjmiLfkv6Hmga8sdXNlckluZm86e30iLCBvcGVuSWQsIEpTT04udG9KU09OKHVzZXJJbmZvKSk7CiAgICAgICAgICAgIGlmKG51bGwgIT0gdXNlckluZm8pIHsKICAgICAgICAgICAgICAgIFN0cmluZyBvcGVuZElkID0gdXNlckluZm8uZ2V0T3BlbmlkKCk7CiAgICAgICAgICAgICAgICBTdHJpbmcgdW5pb25JZCA9IHVzZXJJbmZvLmdldFVuaW9uaWQoKTsKICAgICAgICAgICAgICAgIFdlY2hhdEZhbnMgd2VjaGF0RmFucyA9IHdlY2hhdEZhbnNTZXJ2aWNlLmdldFdlY2hhdEZhbnMob3BlbmRJZCk7CiAgICAgICAgICAgICAgICBpZihudWxsICE9IHdlY2hhdEZhbnMgJiYgU3RyaW5nVXRpbHMuaXNOb3RCbGFuayh1bmlvbklkKSkgewogICAgICAgICAgICAgICAgICAgIFdlY2hhdEZhbnMgZmFucyA9IG5ldyBXZWNoYXRGYW5zKCk7CiAgICAgICAgICAgICAgICAgICAgZmFucy5zZXRJZCh3ZWNoYXRGYW5zLmdldElkKCkpOwogICAgICAgICAgICAgICAgICAgIGZhbnMuc2V0VW5pb25JZCh1bmlvbklkKTsKICAgICAgICAgICAgICAgICAgICB3ZWNoYXRGYW5zU2VydmljZS51cGRXZWNoYXRGYW5zQnlJZChmYW5zKTsKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygib3BlbmRJZOaNonVuaW9uSWQ6IiArIG9wZW5kSWQgKyAiPD09PT4iICsgdW5pb25JZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIumAmui/h29wZW5JZOiOt+WPlnVuaW9uSWTlpLHotKU6IiwgZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog5ZCM5q2l5bCP56iL5bqP5rOo5YaM55qE55So5oi3CiAgICAgKiBAcGFyYW0gdGltZXN0YW1wCiAgICAgKiBAcGFyYW0gc2lnbnR1cmUKICAgICAqIEBwYXJhbSBtb2JpbGUKICAgICAqIEBwYXJhbSB1bmlvbklkCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIEBSZXNwb25zZUJvZHkKICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9ICIvc3luY1VzZXIiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QsIHByb2R1Y2VzID0geyJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgifSkKICAgIHB1YmxpYyBSZXN1bHQgc3luY1VzZXJGcm9tTWluaUFwcChAUmVxdWVzdFBhcmFtKCJ0aW1lc3RhbXAiKSBTdHJpbmcgdGltZXN0YW1wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oInNpZ250dXJlIikgU3RyaW5nIHNpZ250dXJlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oIm1vYmlsZSIpIFN0cmluZyBtb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSgidW5pb25JZCIpIFN0cmluZyB1bmlvbklkKSB7CiAgICAgICAgbG9nZ2VyLmluZm8oIuWQjOatpeWwj+eoi+W6j+azqOWGjOeahOeUqOaItyxtb2JpbGU6e30sdW5pb25JZDp7fSIsIG1vYmlsZSwgdW5pb25JZCk7CiAgICAgICAgUmVzdWx0IHJlc3VsdCA9IG5ldyBCYXNlUmVzdWx0KCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYm9vbGVhbiBpc0xlZ2FsID0gU2lnblV0aWwuY2hlY2tTaWduYXR1cmUoc2lnbnR1cmUsIHRpbWVzdGFtcCwgQ29uc3RhbnQuQVVUSF9LRVkpOwogICAgICAgICAgICBpZiAoIWlzTGVnYWwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZyhDb25zdGFudC5JTExFR0FMX1JFUVVFU1QpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eShtb2JpbGUpIHx8IFN0cmluZ1V0aWxzLmlzRW1wdHkodW5pb25JZCkpIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi5rOo5YaM6K+35rGC5pyJ6K+vLOivt+ajgOafpeWQjumHjeivlSEiKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFdlY2hhdFVzZXIgd1VzZXIgPSB3ZWNoYXRVc2VyU2VydmljZS5nZXRVc2VyQnlNb2JpbGVQaG9uZShtb2JpbGUpOwogICAgICAgICAgICBpZiAobnVsbCAhPSB3VXNlcikgewogICAgICAgICAgICAgICAgTG9uZyB3eElkID0gd1VzZXIuZ2V0V2ZJZCgpOwogICAgICAgICAgICAgICAgV2VjaGF0RmFucyB3ZWNoYXRGYW5zID0gbmV3IFdlY2hhdEZhbnMoKTsKICAgICAgICAgICAgICAgIHdlY2hhdEZhbnMuc2V0SWQod3hJZCk7CiAgICAgICAgICAgICAgICB3ZWNoYXRGYW5zLnNldFVuaW9uSWQodW5pb25JZCk7CiAgICAgICAgICAgICAgICB3ZWNoYXRGYW5zU2VydmljZS51cGRXZWNoYXRGYW5zQnlJZCh3ZWNoYXRGYW5zKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIOajgOafpeivpXVuaW9uaWTmmK/lkKblt7Lnu4/lrZjlnKgKICAgICAgICAgICAgICAgIFdlY2hhdEZhbnMgd2VjaGF0RmFucyA9IHdlY2hhdEZhbnNTZXJ2aWNlLmdldEZhbnModW5pb25JZCk7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB3ZWNoYXRGYW5zKSB7CiAgICAgICAgICAgICAgICAgICAgd2VjaGF0RmFucy5zZXRJc01lbWJlcigyKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgd2VjaGF0RmFucyA9IG5ldyBXZWNoYXRGYW5zKCk7CiAgICAgICAgICAgICAgICAgICAgd2VjaGF0RmFucy5zZXRJc01lbWJlcigyKTsKICAgICAgICAgICAgICAgICAgICB3ZWNoYXRGYW5zLnNldFVuaW9uSWQodW5pb25JZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyDorr7nva7nlKjmiLfkv6Hmga8KICAgICAgICAgICAgICAgIFN0cmluZyB1c2VySWQgPSBVbmlxdWVJREJ1aWxkZXIuZ2V0VW5pcXVlSWRWYWx1ZSgpOwogICAgICAgICAgICAgICAgV2VjaGF0VXNlciB3ZWNoYXRVc2VyID0gbmV3IFdlY2hhdFVzZXIoKTsKICAgICAgICAgICAgICAgIHdlY2hhdFVzZXIuc2V0VXNlcklkKHVzZXJJZCk7CiAgICAgICAgICAgICAgICB3ZWNoYXRVc2VyLnNldE1vYmlsZVBob25lKG1vYmlsZS50cmltKCkpOwogICAgICAgICAgICAgICAgd2VjaGF0VXNlclNlcnZpY2Uuc3luY1VzZXJGcm9tTWluaUFwcCh3ZWNoYXRGYW5zLCB3ZWNoYXRVc2VyKTsKCiAgICAgICAgICAgICAgLy8g5Yi35paw55+t5L+h6JCl6ZSA6K6w5b2VCiAgICAgICAgICAgICAgc21zU2VuZFJlY29yZFNlcnZpY2UudXBkYXRlU21zUmVjb3JkUmVnVGltZShtb2JpbGUpOwoKICAgICAgICAgICAgICAvLyDlvILmraXlkIzmraXor6XnlKjmiLfnmoTljoblj7Lkuqflk4Hkv6Hmga8KICAgICAgICAgICAgICBwcm9kdWN0U2VydmljZS5zeW5jSGlzdHJveVByb2R1Y3RJdGVtRnJvbUNlbVRlbXAobW9iaWxlLnRyaW0oKSwgdXNlcklkKTsKICAgICAgICAgICAgICAvLyDlvILmraXlkIzmraXor6XnlKjmiLfnmoTljoblj7Llj5fnkIbljZXkv6Hmga8KICAgICAgICAgICAgICB3ZWNoYXRPcmRlcnNTZXJ2aWNlLnN5bmNIaXN0b3J5QXBwSW5mbyhtb2JpbGUudHJpbSgpLCB1c2VySWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LlNVQ0NFU1MpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLlkIzmraXnlKjmiLfkv6Hmga/miJDlip8hIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCLlkIzmraXms6jlhoznlKjmiLflpLHotKUs5Y+C5pWwOm1vYmlsZT17fSx1bmlvbklkPXt9IiwgbW9iaWxlLCB1bmlvbklkLCBlKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuWQjOatpeazqOWGjOeUqOaIt+Wksei0pSEiKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIOiOt+WPlueUqOaIt+WfuuacrOS/oeaBrwogICAgICoKICAgICAqIEBwYXJhbSBAcGFyYW0gIGNvZGUKICAgICAqIEBwYXJhbSBAcmV0dXJuIOiuvuWumuaWh+S7tgogICAgICogQHJldHVybiBSZXN1bHQgICAg6L+U5Zue57G75Z6LCiAgICAgKiBAVGl0bGU6IGdldE9BdXRoVXNlckluZm8KICAgICAqIEB2ZXJzaW9uIDEuMAogICAgICogQGF1dGhvciBIb2dlbi5odQogICAgICovCiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSAiL2dldE9BdXRoVXNlckluZm8iLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVCkKICAgIHB1YmxpYyBNb2RlbEFuZFZpZXcgZ2V0T0F1dGhVc2VySW5mbyhIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgQFJlcXVlc3RQYXJhbSgiY29kZSIpIFN0cmluZyBjb2RlKSB7CiAgICAgICAgTWFwPFN0cmluZywgT2JqZWN0PiBtYXAgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIE9iamVjdD4oKTsKICAgICAgICBXZWNoYXRGYW5zVm8gd2VjaGF0RmFuc1ZvID0gd2VjaGF0RmFuc1NlcnZpY2UuZ2V0T0F1dGhVc2VySW5mbyhjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7CiAgICAgICAgaWYgKHdlY2hhdEZhbnNWby5nZXRDb2RlKCkgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gbmV3IE1vZGVsQW5kVmlldygiL3JlZ2lzdGVyL3NjYW5fUVJfY29kZSIpOwogICAgICAgIH0gZWxzZSBpZiAod2VjaGF0RmFuc1ZvLmdldENvZGUoKSA9PSAxKSB7CiAgICAgICAgICAgIG1hcC5wdXQoImRhdGEiLCB3ZWNoYXRGYW5zVm8pOwogICAgICAgICAgICByZXR1cm4gbmV3IE1vZGVsQW5kVmlldygiL3JlZ2lzdGVyL3JlZ2lzdGVyIiwgbWFwKTsKICAgICAgICB9IGVsc2UgaWYgKHdlY2hhdEZhbnNWby5nZXRDb2RlKCkgPT0gMikgewogICAgICAgICAgICBtYXAucHV0KCJkYXRhIiwgd2VjaGF0RmFuc1ZvKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBNb2RlbEFuZFZpZXcoIi91c2VyX2hvbWUvdXNlcl9ob21lIik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgTW9kZWxBbmRWaWV3KCI0MDQiKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiDojrflvpfkuKrkurrotYTmlpnor6bnu4bkv6Hmga8KICAgICAqCiAgICAgKiBAcGFyYW0gcmVxdWVzdAogICAgICogQHBhcmFtIHJlc3BvbnNlCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9ICIvd2VjaGF0dXNlci9nZXQiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVCwgcHJvZHVjZXMgPSB7ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCJ9KQogICAgQFJlc3BvbnNlQm9keQogICAgcHVibGljIFJlc3VsdCBnZXRXZWNoYXRVc2VyKEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB7CiAgICAgICAgUmVzdWx0IHJlc3VsdCA9IG5ldyBCYXNlUmVzdWx0KCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFN0cmluZyBlbmNvZGUgPSBDb29raWVVdGlsLnJlYWRDb29raWUocmVxdWVzdCwgcmVzcG9uc2UsIFdlQ2hhdENvbnN0YW50cy5TQ1JNQVBQX1VTRVIpOwogICAgICAgICAgICBTdHJpbmcgdXNlcklkID0gbmV3IFN0cmluZyhCYXNlNjQuZGVjb2RlKGVuY29kZSkpOwoKICAgICAgICAgICAgV2VjaGF0VXNlciB3ZWNoYXRVc2VyID0gd2VjaGF0VXNlclNlcnZpY2UuZ2V0VXNlckJ5VXNlcklkKHVzZXJJZCk7CiAgICAgICAgICAgIC8v5pWw5o2u5bqT5Lit5pyq5p+l5Yiw5pWw5o2uCiAgICAgICAgICAgIGlmIChudWxsID09IHdlY2hhdFVzZXIpIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi5oKo6L+Y5pyq5rOo5YaM77yM6K+35YWI5rOo5YaMISIpOwogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oInVzZXJJZOaXoOaViO+8jHVzZXJJZCA9IFt7fV3nmoQiLCB1c2VySWQpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgV2VjaGF0VXNlclZvIHdlY2hhdFVzZXJWbyA9IHdlY2hhdENpdHlTZXJ2aWNlLmdldENpdHlOYW1lKHdlY2hhdFVzZXIuZ2V0QXJlYUlkKCkpOwogICAgICAgICAgICBpZiAoT2JqZWN0VXRpbHMuZXF1YWxzKHdlY2hhdFVzZXJWbywgbnVsbCkpIHsKICAgICAgICAgICAgICAgIHdlY2hhdFVzZXJWbyA9IG5ldyBXZWNoYXRVc2VyVm8oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL+WPquWkjeWItumcgOimgeS/ruaUueeahOWtl+auteWIsHZvCiAgICAgICAgICAgIEJlYW5VdGlscy5jb3B5UHJvcGVydGllcyh3ZWNoYXRVc2VyLCB3ZWNoYXRVc2VyVm8pOwoKICAgICAgICAgICAgLy/mlZnogrLnqIvluqYKICAgICAgICAgICAgaWYgKHdlY2hhdFVzZXIuZ2V0RWR1Y2F0aW9uTGV2ZWwoKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBJbnRlZ2VyIGNvZGUgPSB3ZWNoYXRVc2VyLmdldEVkdWNhdGlvbkxldmVsKCk7CiAgICAgICAgICAgICAgICBTdHJpbmcgbmFtZSA9IEVkdWNhdGlvbkxldmVsLmdldE5hbWVCeUNvZGUoY29kZSk7CiAgICAgICAgICAgICAgICB3ZWNoYXRVc2VyVm8uc2V0RWR1Y2F0aW9uTGV2ZWwobmV3IEVudW1Wbyhjb2RlLnRvU3RyaW5nKCksIG5hbWUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL+iBjOS4mgogICAgICAgICAgICBpZiAod2VjaGF0VXNlci5nZXRPY2N1cGF0aW9uKCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgSW50ZWdlciBjb2RlID0gd2VjaGF0VXNlci5nZXRPY2N1cGF0aW9uKCk7CiAgICAgICAgICAgICAgICBTdHJpbmcgbmFtZSA9IE9jY3VwYXRpb24uZ2V0TmFtZUJ5Q29kZShjb2RlKTsKICAgICAgICAgICAgICAgIHdlY2hhdFVzZXJWby5zZXRPY2N1cGF0aW9uKG5ldyBFbnVtVm8oY29kZS50b1N0cmluZygpLCBuYW1lKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy/mnIjmlLblhaUKICAgICAgICAgICAgaWYgKHdlY2hhdFVzZXIuZ2V0TW9udGhseUluY29tZSgpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIEludGVnZXIgY29kZSA9IHdlY2hhdFVzZXIuZ2V0TW9udGhseUluY29tZSgpOwogICAgICAgICAgICAgICAgU3RyaW5nIG5hbWUgPSBNb250aGx5SW5jb21lLmdldE5hbWVCeUNvZGUoY29kZSk7CiAgICAgICAgICAgICAgICB3ZWNoYXRVc2VyVm8uc2V0TW9udGhseUluY29tZShuZXcgRW51bVZvKGNvZGUudG9TdHJpbmcoKSwgbmFtZSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL+WBj+WlveeahOayn+mAmua4oOmBk+WIl+ihqAogICAgICAgICAgICB3ZWNoYXRVc2VyVm8uc2V0Q29tbXVuaWNhdGVDaGFubmVsTGlzdChwYXJzZUVudW0oQ29tbXVuaWNhdGVDaGFubmVsLmNsYXNzKSk7CiAgICAgICAgICAgIC8v5oSf5YW06Laj55qE57G75Z6L5YiX6KGoCiAgICAgICAgICAgIHdlY2hhdFVzZXJWby5zZXRJbnRlcmVzdGVkVHlwZUxpc3QocGFyc2VFbnVtKEludGVyZXN0ZWRUeXBlLmNsYXNzKSk7CgogICAgICAgICAgICAvL+Wwhuayn+mAmu+8jOWFtOi2o+Wtl+espuS4suWIhuWJsuWQjui9rOWMluS4uuaVsOe7hAogICAgICAgICAgICBpZiAod2VjaGF0VXNlci5nZXRDb21tdW5pY2F0ZUNoYW5uZWwoKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBTdHJpbmcgY29tbXVuaWNhdGVDaGFubmVsID0gd2VjaGF0VXNlci5nZXRDb21tdW5pY2F0ZUNoYW5uZWwoKTsKICAgICAgICAgICAgICAgIFN0cmluZ1tdIHNwbGl0c3RyID0gY29tbXVuaWNhdGVDaGFubmVsLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICB3ZWNoYXRVc2VyVm8uc2V0Q29tbXVuaWNhdGVDaGFubmVscyhzcGxpdHN0cik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3ZWNoYXRVc2VyVm8uc2V0Q29tbXVuaWNhdGVDaGFubmVscyhuZXcgU3RyaW5nW117fSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh3ZWNoYXRVc2VyLmdldEludGVyZXN0ZWRUeXBlKCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgU3RyaW5nIGludGVyZXN0ZWRUeXBlID0gd2VjaGF0VXNlci5nZXRJbnRlcmVzdGVkVHlwZSgpOwogICAgICAgICAgICAgICAgU3RyaW5nW10gc3BsaXRzdHIgPSBpbnRlcmVzdGVkVHlwZS5zcGxpdCgiLCIpOwogICAgICAgICAgICAgICAgd2VjaGF0VXNlclZvLnNldEludGVyZXN0ZWRUeXBlcyhzcGxpdHN0cik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3ZWNoYXRVc2VyVm8uc2V0SW50ZXJlc3RlZFR5cGVzKG5ldyBTdHJpbmdbXXt9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy/ovazljJbml6XmnJ/moLzlvI8KICAgICAgICAgICAgaWYgKHdlY2hhdFVzZXIuZ2V0QmlydGhkYXkoKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB3ZWNoYXRVc2VyVm8uc2V0QmlydGhkYXkoRGF0ZVV0aWwuRGF0ZVRvU3RyaW5nKHdlY2hhdFVzZXIuZ2V0QmlydGhkYXkoKSwgRGF0ZVV0aWwuWVlZWV9NTV9ERCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXN1bHQuc2V0RGF0YSh3ZWNoYXRVc2VyVm8pOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5TVUNDRVNTKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi5pWw5o2u6I635Y+W5oiQ5YqfISIpOwoKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCLmiJDlip/ojrflj5bkuKrkurrotYTmlpnkv6Hmga8sdXNlcklkID0gW3t9XSAiLCB1c2VySWQpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigi6K+75Y+WY29va2ll5byC5bi4IiwgZSk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLojrflj5bkuKrkurrotYTmlpnlpLHotKUhIik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKCiAgICAvKioKICAgICAqIOabtOaWsOS4quS6uui1hOaWmQogICAgICoKICAgICAqIEBwYXJhbSByZXF1ZXN0CiAgICAgKiBAcGFyYW0gcmVzcG9uc2UKICAgICAqIEBwYXJhbSB1c2VyTmFtZSAgICAgICAgICAg5Lya5ZGY5aeT5ZCNCiAgICAgKiBAcGFyYW0gbmlja05hbWUgICAgICAgICAgIOS8muWRmOaYteensAogICAgICogQHBhcmFtIG1hcml0YWxTdGF0dXMKICAgICAqIEBwYXJhbSBnZW5kZXIKICAgICAqIEBwYXJhbSBlbWFpbAogICAgICogQHBhcmFtIGJpcnRoZGF5CiAgICAgKiBAcGFyYW0gcHJvdmluY2VJZCAgICAgICAgIOecgQogICAgICogQHBhcmFtIGNpdHlJZCAgICAgICAgICAgICDluIIKICAgICAqIEBwYXJhbSBhcmVhSWQgICAgICAgICAgICAg5Yy6CiAgICAgKiBAcGFyYW0gY29tbXVuaWNhdGVDaGFubmVsIOayn+mAmua4oOmBkwogICAgICogQHBhcmFtIGludGVyZXN0ZWRUeXBlICAgICDmhJ/lhbTotqPnmoTkv6Hmga/nsbvlnosKICAgICAqIEBwYXJhbSBlZHVjYXRpb25MZXZlbCAgICAg5pWZ6IKy56iL5bqmCiAgICAgKiBAcGFyYW0gb2NjdXBhdGlvbiAgICAgICAgIOiBjOS4mgogICAgICogQHBhcmFtIG1vbnRobHlJbmNvbWUgICAgICDmnIjmlLblhaUKICAgICAqIEByZXR1cm4KICAgICAqLwogICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gIi93ZWNoYXR1c2VyL3VwZGF0ZSIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVCwgcHJvZHVjZXMgPSB7ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCJ9KQogICAgQFJlc3BvbnNlQm9keQogICAgcHVibGljIFJlc3VsdCB1cGRhdGVXZWNoYXRVc2VyKEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oInVzZXJOYW1lIikgU3RyaW5nIHVzZXJOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oIm5pY2tOYW1lIikgU3RyaW5nIG5pY2tOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSAibWFyaXRhbFN0YXR1cyIsIHJlcXVpcmVkID0gZmFsc2UpIEludGVnZXIgbWFyaXRhbFN0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJnZW5kZXIiKSBJbnRlZ2VyIGdlbmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJlbWFpbCIpIFN0cmluZyBlbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJiaXJ0aGRheSIpIFN0cmluZyBiaXJ0aGRheSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJwcm92aW5jZUlkIikgU3RyaW5nIHByb3ZpbmNlSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSgiY2l0eUlkIikgU3RyaW5nIGNpdHlJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKCJhcmVhSWQiKSBTdHJpbmcgYXJlYUlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oImNvbW11bmljYXRlQ2hhbm5lbCIpIFN0cmluZyBjb21tdW5pY2F0ZUNoYW5uZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSgiaW50ZXJlc3RlZFR5cGUiKSBTdHJpbmcgaW50ZXJlc3RlZFR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9ICJlZHVjYXRpb25MZXZlbCIsIHJlcXVpcmVkID0gZmFsc2UpIEludGVnZXIgZWR1Y2F0aW9uTGV2ZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9ICJvY2N1cGF0aW9uIiwgcmVxdWlyZWQgPSBmYWxzZSkgSW50ZWdlciBvY2N1cGF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSAibW9udGhseUluY29tZSIsIHJlcXVpcmVkID0gZmFsc2UpIEludGVnZXIgbW9udGhseUluY29tZSkgewogICAgICAgIFJlc3VsdCByZXN1bHQgPSBuZXcgQmFzZVJlc3VsdCgpOwogICAgICAgIFdlY2hhdFVzZXIgd2VjaGF0VXNlciA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgU3RyaW5nIGVuY29kZSA9IENvb2tpZVV0aWwucmVhZENvb2tpZShyZXF1ZXN0LCByZXNwb25zZSwgV2VDaGF0Q29uc3RhbnRzLlNDUk1BUFBfVVNFUik7CiAgICAgICAgICAgIFN0cmluZyB1c2VySWQgPSBuZXcgU3RyaW5nKEJhc2U2NC5kZWNvZGUoZW5jb2RlKSk7CgogICAgICAgICAgICB3ZWNoYXRVc2VyID0gd2VjaGF0VXNlclNlcnZpY2UuZ2V0VXNlckJ5VXNlcklkKHVzZXJJZCk7CiAgICAgICAgICAgIC8v5pWw5o2u5bqT5Lit5pyq5p+l5Yiw5pWw5o2uCiAgICAgICAgICAgIGlmIChudWxsID09IHdlY2hhdFVzZXIpIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJ1c2VySWTml6DmlYjvvIx1c2VySWQgPSBbe31d55qEIiwgdXNlcklkKTsKICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuaCqOi/mOacquazqOWGjO+8jOivt+WFiOazqOWGjCEiKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIuivu+WPlmNvb2tpZeW8guW4uCIsIGUpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5GQUlMKTsKICAgICAgICB9CgogICAgICAgIC8v55So5oi35ZCN5LiN6IO95Li656m6CiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzRW1wdHkodXNlck5hbWUpKSB7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLlp5PlkI3kuI3og73kuLrnqbohIik7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8v5pi156ew5LiN6IO95Li656m6CiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzRW1wdHkobmlja05hbWUpKSB7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLmmLXnp7DkuI3og73kuLrnqbohIik7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8v5oCn5Yir5LiN6IO95Li656m6CiAgICAgICAgaWYgKGdlbmRlciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLmgKfliKvkuI3og73kuLrnqbohIik7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8vZW1haWzkuI3og73kuLrnqboKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eShlbWFpbCkpIHsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coImVtYWls5LiN6IO95Li656m6ISIpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvL+eUn+aXpeS4jeiDveS4uuepugogICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KGJpcnRoZGF5KSkgewogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5GQUlMKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi55Sf5pel5LiN6IO95Li656m6ISIpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvL+ecgeW4guWMuuS4jeiDveS4uuepugogICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHByb3ZpbmNlSWQpIHx8IFN0cmluZ1V0aWxzLmlzRW1wdHkoY2l0eUlkKSB8fCBTdHJpbmdVdGlscy5pc0VtcHR5KGFyZWFJZCkpIHsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuecgeW4guWMuuS4jeiDveS4uuepuiEiKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgLy/msp/pgJrmuKDpgZPkuI3og73kuLrnqboKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eShjb21tdW5pY2F0ZUNoYW5uZWwpKSB7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLmsp/pgJrmuKDpgZPkuI3og73kuLrnqbohIik7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8v5YW06Laj57G75Z6L5LiN6IO95Li656m6CiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzRW1wdHkoaW50ZXJlc3RlZFR5cGUpKSB7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLlhbTotqPnsbvlnovkuI3og73kuLrnqbohIik7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICB3ZWNoYXRVc2VyLnNldFVzZXJOYW1lKHVzZXJOYW1lKTsKICAgICAgICB3ZWNoYXRVc2VyLnNldE5pY2tOYW1lKG5pY2tOYW1lKTsKICAgICAgICB3ZWNoYXRVc2VyLnNldEdlbmRlcihnZW5kZXIpOwogICAgICAgIHdlY2hhdFVzZXIuc2V0TWFyaXRhbFN0YXR1cyhtYXJpdGFsU3RhdHVzKTsKICAgICAgICB3ZWNoYXRVc2VyLnNldEVtYWlsKGVtYWlsKTsKICAgICAgICB3ZWNoYXRVc2VyLnNldEJpcnRoZGF5KERhdGVVdGlsLlN0cmluZ1RvRGF0ZShiaXJ0aGRheSwgInl5eXktTU0tZGQiKSk7CiAgICAgICAgd2VjaGF0VXNlci5zZXRQcm92aW5jZUlkKHByb3ZpbmNlSWQpOwogICAgICAgIHdlY2hhdFVzZXIuc2V0Q2l0eUlkKGNpdHlJZCk7CiAgICAgICAgd2VjaGF0VXNlci5zZXRBcmVhSWQoYXJlYUlkKTsKICAgICAgICB3ZWNoYXRVc2VyLnNldENvbW11bmljYXRlQ2hhbm5lbChjb21tdW5pY2F0ZUNoYW5uZWwpOwogICAgICAgIHdlY2hhdFVzZXIuc2V0SW50ZXJlc3RlZFR5cGUoaW50ZXJlc3RlZFR5cGUpOwogICAgICAgIHdlY2hhdFVzZXIuc2V0RWR1Y2F0aW9uTGV2ZWwoZWR1Y2F0aW9uTGV2ZWwpOwogICAgICAgIHdlY2hhdFVzZXIuc2V0T2NjdXBhdGlvbihvY2N1cGF0aW9uKTsKICAgICAgICB3ZWNoYXRVc2VyLnNldE1vbnRobHlJbmNvbWUobW9udGhseUluY29tZSk7CiAgICAgICAgbG9uZyB3ZklkID0gd2VjaGF0VXNlci5nZXRXZklkKCk7CiAgICAgICAgaW50IGNvdW50ID0gd2VjaGF0VXNlclNlcnZpY2UudXBkYXRlVXNlcih3ZWNoYXRVc2VyLCB3ZklkKTsKICAgICAgICBpZiAoY291bnQgPiAwKSB7CiAgICAgICAgICAgIC8vIOS/ruaUueaIkOWKn+WQjuWPkemAgeaooeadv+a2iOaBrwogICAgICAgICAgICBXZWNoYXRGYW5zIHdlY2hhdEZhbnMgPSB3ZWNoYXRGYW5zU2VydmljZS5nZXRXZWNoYXRGYW5zQnlJZCh3ZklkKTsKICAgICAgICAgICAgd2VjaGF0VXNlclNlcnZpY2Uuc2VuZFVzZXJVcGRUZW1wbGF0ZU1zZyh3ZWNoYXRGYW5zLmdldE9wZW5JZCgpLCB3ZWNoYXRGYW5zLmdldFdmTmlja05hbWUoKSk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LlNVQ0NFU1MpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLkv67mlLnmiJDlip/vvIEiKTsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIldlY2hhdFVzZXLmlbDmja7mm7TmlrDmiJDlip8sdXNlcklkID0gW3t9XSIsIHdlY2hhdFVzZXIuZ2V0VXNlcklkKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLmm7TmlrDlpLHotKUhIik7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJXZWNoYXRVc2Vy5pWw5o2u5pu05paw5aSx6LSl77yBdXNlcklkID0gW3t9XSIsIHdlY2hhdFVzZXIuZ2V0VXNlcklkKCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCgogICAgLyoqCiAgICAgKiDojrflvpfmlZnogrLnqIvluqZsaXN0CiAgICAgKgogICAgICogQHBhcmFtIHJlcXVlc3QKICAgICAqIEBwYXJhbSByZXNwb25zZQogICAgICogQHJldHVybgogICAgICovCiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSAiZWR1Y2F0aW9uL2dldCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuR0VULCBwcm9kdWNlcyA9IHsiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04In0pCiAgICBAUmVzcG9uc2VCb2R5CiAgICBwdWJsaWMgUmVzdWx0IGdldEVkdWNhdGlvbkxpc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHsKICAgICAgICBSZXN1bHQgcmVzdWx0ID0gbmV3IEJhc2VSZXN1bHQoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBMaXN0PEVudW1Wbz4gZWR1Y2F0aW9uTGV2ZWxzID0gcGFyc2VFbnVtKEVkdWNhdGlvbkxldmVsLmNsYXNzKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuU1VDQ0VTUyk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Nc2coIuaVsOaNruiOt+WPluaIkOWKnyEiKTsKICAgICAgICAgICAgcmVzdWx0LnNldERhdGEoZWR1Y2F0aW9uTGV2ZWxzKTsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIuaIkOWKn+iOt+WPluaVmeiCsueoi+W6puWIl+ihqOS/oeaBryIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigi6I635Y+W5pWZ6IKy56iL5bqm5YiX6KGo5aSx6LSlLOWOn+WboCIsIGUpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5GQUlMKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiDojrflvpfogYzkuJpsaXN0CiAgICAgKgogICAgICogQHBhcmFtIHJlcXVlc3QKICAgICAqIEBwYXJhbSByZXNwb25zZQogICAgICogQHJldHVybgogICAgICovCiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSAib2NjdXBhdGlvbi9nZXQiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVCwgcHJvZHVjZXMgPSB7ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCJ9KQogICAgQFJlc3BvbnNlQm9keQogICAgcHVibGljIFJlc3VsdCBnZXRvY2N1cGF0aW9uTGlzdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgewogICAgICAgIFJlc3VsdCByZXN1bHQgPSBuZXcgQmFzZVJlc3VsdCgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIExpc3Q8RW51bVZvPiBvY2N1cGF0aW9ucyA9IHBhcnNlRW51bShPY2N1cGF0aW9uLmNsYXNzKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuU1VDQ0VTUyk7CiAgICAgICAgICAgIHJlc3VsdC5zZXREYXRhKG9jY3VwYXRpb25zKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi5pWw5o2u6I635Y+W5oiQ5YqfISIpOwogICAgICAgICAgICBsb2dnZXIuaW5mbygi5oiQ5Yqf6I635Y+W6IGM5Lia5YiX6KGo5L+h5oGvIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCLojrflj5bogYzkuJrliJfooajlpLHotKUs5Y6f5ZugIiwgZSk7CiAgICAgICAgICAgIHJlc3VsdC5zZXRSZXR1cm5Db2RlKENvbnN0YW50LkZBSUwpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIOiOt+W+l+aciOaUtuWFpWxpc3QKICAgICAqCiAgICAgKiBAcGFyYW0gcmVxdWVzdAogICAgICogQHBhcmFtIHJlc3BvbnNlCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9ICJtb250aGx5SW5jb21lL2dldCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuR0VULCBwcm9kdWNlcyA9IHsiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04In0pCiAgICBAUmVzcG9uc2VCb2R5CiAgICBwdWJsaWMgUmVzdWx0IGdldE1vbnRobHlJbmNvbWVMaXN0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB7CiAgICAgICAgUmVzdWx0IHJlc3VsdCA9IG5ldyBCYXNlUmVzdWx0KCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgTGlzdDxFbnVtVm8+IG1vbnRobHlJbmNvbWVzID0gcGFyc2VFbnVtKE1vbnRobHlJbmNvbWUuY2xhc3MpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5TVUNDRVNTKTsKICAgICAgICAgICAgcmVzdWx0LnNldERhdGEobW9udGhseUluY29tZXMpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuTXNnKCLmlbDmja7ojrflj5bmiJDlip8hIik7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLmiJDlip/ojrflj5bmnIjmlLblhaXliJfooajkv6Hmga8iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIuiOt+WPluaciOaUtuWFpeWIl+ihqOWksei0pSzljp/lm6AiLCBlKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAgICog6LCD55So6Ziy5Lyq5p+l6K+i5o6l5Y+jCiAgICAgKgogICAgICogQHBhcmFtIHJlcXVlc3QKICAgICAqIEBwYXJhbSByZXNwb25zZQogICAgICogQHBhcmFtIGJhcmNvZGUKICAgICAqIEByZXR1cm4KICAgICAqLwogICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gIi9xdWVyeS9zZWN1cml0eUNvZGUiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVCwgcHJvZHVjZXMgPSB7ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCJ9KQogICAgQFJlc3BvbnNlQm9keQogICAgcHVibGljIFJlc3VsdCBzZWN1cml0eVF1ZXJ5KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBTdHJpbmcgYmFyY29kZSkgewogICAgICAgIFJlc3VsdCByZXN1bHQgPSBuZXcgQmFzZVJlc3VsdCgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFN0cmluZyBlbmNvZGUgPSBDb29raWVVdGlsLnJlYWRDb29raWUocmVxdWVzdCwgcmVzcG9uc2UsIFdlQ2hhdENvbnN0YW50cy5TQ1JNQVBQX1VTRVIpOwogICAgICAgICAgICBTdHJpbmcgdXNlcklkID0gbmV3IFN0cmluZyhCYXNlNjQuZGVjb2RlKGVuY29kZSkpOwoKICAgICAgICAgICAgV2VjaGF0VXNlclZvIHdlY2hhdFVzZXIgPSB3ZWNoYXRVc2VyU2VydmljZS5nZXRCYXNlVXNlckluZm9CeVVzZXJJZCh1c2VySWQpOwoKICAgICAgICAgICAgLy/nlKjmiLfkuI3lrZjlnKgKICAgICAgICAgICAgaWYgKHdlY2hhdFVzZXIgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybkNvZGUoQ29uc3RhbnQuRkFJTCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL+aIquWPluecgeW4guWMugogICAgICAgICAgICBTdHJpbmcgYXJlYSA9IFN0cmluZ1V0aWxzLkVNUFRZOwogICAgICAgICAgICBpZiAoIVN0cmluZ1V0aWxzLmlzRW1wdHkod2VjaGF0VXNlci5nZXRQcm92aW5jZU5hbWUoKSkpIHsKICAgICAgICAgICAgICAgIGludCBwb3NpdGlvbiA9IHdlY2hhdFVzZXIuZ2V0UHJvdmluY2VOYW1lKCkuaW5kZXhPZigi55yBIik7CiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBTdHJpbmcgcHJvdmluY2UgPSB3ZWNoYXRVc2VyLmdldFByb3ZpbmNlTmFtZSgpLnN1YnN0cmluZygwLCBwb3NpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgYXJlYSA9IHByb3ZpbmNlICsgIi0iOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhcmVhID0gd2VjaGF0VXNlci5nZXRQcm92aW5jZU5hbWUoKSArICItIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gd2VjaGF0VXNlci5nZXRDaXR5TmFtZSgpLmluZGV4T2YoIuW4giIpOwogICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGNpdHkgPSB3ZWNoYXRVc2VyLmdldENpdHlOYW1lKCkuc3Vic3RyaW5nKDAsIHBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICBhcmVhICs9IGNpdHk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFyZWEgKz0gd2VjaGF0VXNlci5nZXRDaXR5TmFtZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIFN0cmluZyBjaXBoZXJ0ZXh0ID0gTUQ1LnRvTUQ1KGJhcmNvZGUgKyAiUVlGVyIpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgIHJlc3VsdCA9IHdlY2hhdFVzZXJTZXJ2aWNlLnNlY3VyaXR5UXVlcnkoYmFyY29kZSwgd2VjaGF0VXNlci5nZXRNb2JpbGVQaG9uZSgpLCBhcmVhLCBjaXBoZXJ0ZXh0KTsKICAgICAgICAgICAgaWYgKHJlc3VsdC5nZXRSZXR1cm5Db2RlKCkgPT0gMCkgewogICAgICAgICAgICAgICAgcmVzdWx0LnNldERhdGEod2VjaGF0VXNlci5nZXROaWNrTmFtZSgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigi5p+l6K+i5aSx6LSlIixlKTsKICAgICAgICAgICAgcmVzdWx0LnNldFJldHVybk1zZygi5p+l6K+i5aSx6LSlISIpOwogICAgICAgICAgICByZXN1bHQuc2V0UmV0dXJuQ29kZShDb25zdGFudC5GQUlMKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIOaemuS4vuWFg+e0oOS/neWtmOiHs2xpc3TkuK0KICAgICAqCiAgICAgKiBAcGFyYW0gcmVmCiAgICAgKiBAcGFyYW0gPFQ+CiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgPFQ+IExpc3Q8RW51bVZvPiBwYXJzZUVudW0oQ2xhc3M8VD4gcmVmKSB7CiAgICAgICAgTGlzdDxFbnVtVm8+IGxpc3RzID0gbmV3IEFycmF5TGlzdDxFbnVtVm8+KCk7CiAgICAgICAgaWYgKHJlZi5pc0VudW0oKSkgewogICAgICAgICAgICAvL+iOt+W+l+aJgOacieaemuS4vuexu+WFg+e0oAogICAgICAgICAgICBUW10gdHMgPSByZWYuZ2V0RW51bUNvbnN0YW50cygpOwogICAgICAgICAgICBmb3IgKFQgdCA6IHRzKSB7CiAgICAgICAgICAgICAgICBFbnVtPD8+IHRlbXBFbnVtID0gKEVudW08Pz4pIHQ7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIC8v6I635b6XY29kZeWxnuaAp+WAvAogICAgICAgICAgICAgICAgICAgIE1ldGhvZCBjb2RlTWV0aG9kID0gdGVtcEVudW0uZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldENvZGUiKTsKICAgICAgICAgICAgICAgICAgICAvL+WFs+mXreajgOafpQogICAgICAgICAgICAgICAgICAgIGNvZGVNZXRob2Quc2V0QWNjZXNzaWJsZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY29kZSA9IGNvZGVNZXRob2QuaW52b2tlKHQpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgLy/ojrflvpduYW1l5bGe5oCn5YC8CiAgICAgICAgICAgICAgICAgICAgTWV0aG9kIG5hbWVNZXRob2QgPSB0ZW1wRW51bS5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0TmFtZSIpOwogICAgICAgICAgICAgICAgICAgIG5hbWVNZXRob2Quc2V0QWNjZXNzaWJsZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbmFtZSA9IG5hbWVNZXRob2QuaW52b2tlKHQpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgbGlzdHMuYWRkKG5ldyBFbnVtVm8oY29kZSwgbmFtZSkpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbGlzdHM7CiAgICB9CgoKICAgIC8qKgogICAgICog6YCa6YWN6YWN572u5b6u5L+h6I+c5Y2V6Lev5b6ECiAgICAgKgogICAgICogQHBhcmFtIHJlcXVlc3QKICAgICAqIEBwYXJhbSByZXNwb25zZQogICAgICogQHJldHVybgogICAgICovCiAgICBAUmVxdWVzdE1hcHBpbmcoIi9maWx0ZXIvKioiKQogICAgcHVibGljIE1vZGVsQW5kVmlldyB0ZXN0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB7CiAgICAgICAgU3RyaW5nIHVybFBhdGggPSBleHRyYWN0UGF0aEZyb21QYXR0ZXJuKHJlcXVlc3QpOwoKICAgICAgICBNb2RlbEFuZFZpZXcgbW9kZWxBbmRWaWV3ID0gbmV3IE1vZGVsQW5kVmlldyh1cmxQYXRoKTsKCiAgICAgICAgcmV0dXJuIG1vZGVsQW5kVmlldzsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgZXh0cmFjdFBhdGhGcm9tUGF0dGVybihmaW5hbCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCkgewogICAgICAgIFN0cmluZyBwYXRoID0gKFN0cmluZykgcmVxdWVzdC5nZXRBdHRyaWJ1dGUoSGFuZGxlck1hcHBpbmcuUEFUSF9XSVRISU5fSEFORExFUl9NQVBQSU5HX0FUVFJJQlVURSk7CiAgICAgICAgU3RyaW5nIGJlc3RNYXRjaFBhdHRlcm4gPSAoU3RyaW5nKSByZXF1ZXN0LmdldEF0dHJpYnV0ZShIYW5kbGVyTWFwcGluZy5CRVNUX01BVENISU5HX1BBVFRFUk5fQVRUUklCVVRFKTsKICAgICAgICByZXR1cm4gbmV3IEFudFBhdGhNYXRjaGVyKCkuZXh0cmFjdFBhdGhXaXRoaW5QYXR0ZXJuKGJlc3RNYXRjaFBhdHRlcm4sIHBhdGgpOwogICAgfQoKCiAgICAvKioKICAgICAqIOi3s+i9rOWIsOS4quS6uuS8muWRmAogICAgICoKICAgICAqIEBwYXJhbSByZXF1ZXN0CiAgICAgKiBAcGFyYW0gcmVzcG9uc2UKICAgICAqIEByZXR1cm4KICAgICAqLwogICAgQFJlcXVlc3RNYXBwaW5nKCIvbWVtYmVySW5mby9pbmRleCIpCiAgICBwdWJsaWMgTW9kZWxBbmRWaWV3IHRvTWVtYmVyUGFnZShIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgewogICAgICAgIE1vZGVsQW5kVmlldyBtb2RlbEFuZFZpZXcgPSBuZXcgTW9kZWxBbmRWaWV3KCJtZW1iZXJJbmZvL21lbWJlckluZm8iKTsKICAgICAgICByZXR1cm4gbW9kZWxBbmRWaWV3OwogICAgfQo=</text>
      </register>
      <register name="3" type="4">
        <text>title, orderType, ordersCode, orderTime, qyhUserName,
				qyhUserPhone, remark</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">CQkK</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">CQkJCQo=</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">CQkJICAJCg==</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">CQkJCWRhdGEuZ2V0VGVtcGxhdGVEYXRhSXRlbUluc3RhbmNlKCkuYWRkSXRlbSgiZmlyc3QiLCB0aXRsZSk7Cg==</text>
      </register>
      <register name=":" type="4">
        <text>834</text>
      </register>
    </registers>
    <search>
      <last-search encoding="base64">XDxjb252ZXJzaW9uUHJpY2VcPg==</last-search>
      <last-offset />
      <last-pattern encoding="base64">XDxjb252ZXJzaW9uUHJpY2VcPg==</last-pattern>
      <last-replace>~</last-replace>
      <last-substitute>dealer</last-substitute>
      <last-dir>1</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search>
        <entry>xquark_crm_dealer_saler</entry>
        <entry>dealer</entry>
        <entry>delete</entry>
        <entry encoding="base64">XDxzdGF0dXNcPg==</entry>
        <entry>barCode</entry>
        <entry>encode</entry>
        <entry>INFO</entry>
        <entry>order</entry>
        <entry>capable</entry>
        <entry>archive</entry>
        <entry>permission</entry>
        <entry>list</entry>
        <entry>https</entry>
        <entry encoding="base64">XDxjb252ZXJzaW9uUHJpY2VcPg==</entry>
      </history-search>
      <history-cmd>
        <entry>240</entry>
        <entry>232</entry>
        <entry>1118</entry>
        <entry>140</entry>
        <entry>120</entry>
        <entry>327</entry>
        <entry>86</entry>
        <entry>94</entry>
        <entry>93</entry>
        <entry>1031</entry>
        <entry>wq</entry>
        <entry>1217</entry>
        <entry>607</entry>
        <entry>142</entry>
        <entry>332</entry>
        <entry>517</entry>
        <entry>1102</entry>
        <entry>131</entry>
        <entry>31</entry>
        <entry>834</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed S</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
    </shortcut-conflicts>
    <editor>
      <key-repeat enabled="false" />
    </editor>
  </component>
</application>